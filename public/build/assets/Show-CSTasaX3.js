import{k as g,T as Q,o as n,c as F,w as h,b as e,t as u,j as m,a as s,h as i,d as W,F as V,u as l,l as $,O as C}from"./app-DhAk2B9F.js";import{_ as X}from"./DefaultLayout-CWSOlPCh.js";import{_ as c}from"./InputForm-ZivRodwo.js";import{_ as Y}from"./ModalForm-BzeIvtvi.js";import{_ as S}from"./SelectForm-BA2bjkri.js";import{_ as w}from"./PrimaryButton-D9xsJ82q.js";import{_ as I}from"./SecondaryButton-B4hYLcYP.js";import{g as x,a as Z}from"./date-a-P_LG0S.js";import{_ as ee}from"./Tabs-DMhhq8-5.js";import{I as te}from"./IconEdit-DVNOvkGw.js";import{I as ae}from"./IconEye-BC8mxZUa.js";import{_ as le,a as oe,b as M,I as se}from"./TableSection-DnIYx_0D.js";import{I as de}from"./IconUpload-DaiZL6wt.js";import{c as ne}from"./createVueComponent-YZjrh2G-.js";import{c as ie}from"./confirmation-LqhIgFI2.js";import{u as N,d as ue}from"./toast-aXzCVqLX.js";import{u as re}from"./useEvent-Cv18EGms.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license @tabler/icons-vue v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ce=ne("outline","vaccine","IconVaccine",[["path",{d:"M17 3l4 4",key:"svg-0"}],["path",{d:"M19 5l-4.5 4.5",key:"svg-1"}],["path",{d:"M11.5 6.5l6 6",key:"svg-2"}],["path",{d:"M16.5 11.5l-6.5 6.5h-4v-4l6.5 -6.5",key:"svg-3"}],["path",{d:"M7.5 12.5l1.5 1.5",key:"svg-4"}],["path",{d:"M10.5 9.5l1.5 1.5",key:"svg-5"}],["path",{d:"M3 21l3 -3",key:"svg-6"}]]);const me={class:"mx-auto max-w-270"},_e={class:"mb-4 flex gap-3 items-center justify-between h-12"},be={class:"text-2xl font-semibold"},he={key:0,class:"grid grid-cols-5 gap-8"},pe={class:"col-span-5 lg:col-span-3"},fe={class:"rounded-md border border-stroke bg-white shadow-default"},ve=e("div",{class:"border-b border-stroke py-4 px-7"},[e("h3",{class:"font-medium"},"Datos generales")],-1),ye={class:"p-7"},ge={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},xe=e("label",{class:"text-base font-bold"},"Código",-1),Ve={class:"text-base"},ke=e("label",{class:"text-base font-bold"},"Nombre",-1),Ce={class:"text-base"},we=e("label",{class:"text-base font-bold"},"Especie",-1),Ue={class:"text-base"},Ee=e("label",{class:"text-base font-bold"},"Género",-1),Fe={class:"text-base"},$e=e("label",{class:"text-base font-bold"},"Raza",-1),Se={class:"text-base"},Ie=e("label",{class:"text-base font-bold"},"Peso inicial",-1),Me={class:"text-base"},Ne=e("label",{class:"text-base font-bold"},"Altura inicial",-1),je={class:"text-base"},qe={key:0},Ae=e("label",{class:"text-base font-bold"},"Fecha de nacimiento",-1),De={class:"text-base"},Pe={key:1},Be=e("label",{class:"text-base font-bold"},"Fecha de adopción",-1),Re={class:"text-base"},ze={key:2},Ge=e("label",{class:"text-base font-bold"},"Fecha de ingreso",-1),Oe={class:"text-base"},He={key:3},Le=e("label",{class:"text-base font-bold"},"Fecha de salida",-1),Te={class:"text-base"},Je={key:4},Ke=e("label",{class:"text-base font-bold"},"Fecha de muerte",-1),Qe={class:"text-base"},We={key:5},Xe=e("label",{class:"text-base font-bold"},"Causa de muerte",-1),Ye={class:"text-base"},Ze=e("option",{value:""},"Ninguna",-1),et=["value"],tt=e("option",{value:"Macho"},"Macho",-1),at=e("option",{value:"Hembra"},"Hembra",-1),lt={class:"flex gap-4 items-center justify-end col-span-2"},ot={class:"col-span-5 lg:col-span-2"},st={class:"rounded-md border border-stroke bg-white shadow-default"},dt=e("div",{class:"border-b border-stroke py-4 px-7"},[e("h3",{class:"font-medium"},"Foto")],-1),nt={class:"p-7"},it={key:0,class:"mb-4 w-full flex justify-center"},ut=["src"],rt={key:1,class:"relative mb-5 block w-full cursor-pointer appearance-none rounded-md border-2 border-dashed border-primary bg-gray py-4 px-4"},ct={class:"flex flex-col items-center justify-center space-y-3"},mt={class:"flex h-10 w-10 items-center justify-center rounded-full border-2 border-slate-200 bg-white"},_t=e("p",{class:"text-sm font-medium"},[e("span",{class:"text-primary"}," Subir foto ")],-1),bt={key:2,class:"flex gap-4 items-center justify-end col-span-2"},ht={key:3,class:"flex justify-end"},pt={key:1},ft=e("th",null,"Fecha",-1),vt=e("th",null,"Nombre",-1),yt=e("th",null,"Cantidad",-1),gt=e("th",null,"Acciones",-1),xt={key:0},Vt=e("td",{class:"text-center text-slate-400",colspan:"6"},"No hay datos que mostrar",-1),kt=[Vt],Ct={class:"flex gap-4"},Ot={__name:"Show",props:["animal","details","species","events"],setup(d){var U;const v=g(!1),y=g("detalles"),r=d,p=g((U=r.animal)==null?void 0:U.photo),k=g(!1),f=g(!1),{storeEvent:j,updateEvent:q,formEvent:b,setEventValues:A,destroyEvent:D}=re({model_id:r.animal.id,model_type:"App\\Models\\Animal"}),o=Q({id:r.animal.id,name:r.animal.name,code:r.animal.code,specie_id:r.animal.specie_id,photo:r.animal.photo,details:{gender:r.details.gender||"Hembra",race:r.details.race||"",initial_weight:r.details.initial_weight||"",initial_height:r.details.initial_height||"",birth_date:r.details.birth_date||"",adoption_date:r.details.adoption_date||"",entry_date:r.details.entry_date||"",exit_date:r.details.exit_date||"",death_date:r.details.death_date||"",cause_of_death:r.details.cause_of_death||""}});function P(){p.value="",o.details.photo=""}const B=[{label:"Detalles",value:"detalles",icon:ae},{label:"Eventos",value:"eventos",icon:ce}];function R(){C.reload({only:["animal"]}),v.value=!1}function z(_){o.photo=_.target.files[0];const t=new FileReader;t.readAsDataURL(o.photo),t.onload=()=>{p.value=t.result}}function G(){ie({callback:()=>{C.delete(route("dashboard.photo.destroy",o.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{o.photo="",p.value="",ue()}})}})}function O(){if(o.code.includes(" ")){error("El codigo no debe contener espacios en blanco");return}o.transform(_=>({..._,photo:null})).put(route("dashboard.animals.update",o.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{R(),N()},onError:_=>{console.log(_)}})}function H(){k.value=!0,C.post(route("dashboard.photo.store"),{photo:o.photo,animal_id:o.id},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{o.photo="",N()},onFinish:()=>{k.value=!1}})}function L(_){A(_),f.value=!0}function T(){b.id?q(()=>f.value=!1):j(()=>f.value=!1)}function J(){b.reset()}return(_,t)=>(n(),F(X,{head:"Detalles"},{default:h(()=>{var E;return[e("div",me,[e("div",_e,[e("h2",be,u(d.animal.code),1),y.value=="eventos"?(n(),F(w,{key:0,text:"Nuevo",onClick:t[0]||(t[0]=a=>f.value=!0)})):m("",!0)]),s(ee,{options:B,modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=a=>y.value=a)},null,8,["modelValue"]),y.value=="detalles"?(n(),i("div",he,[e("div",pe,[e("div",fe,[ve,e("div",ye,[e("form",{onSubmit:t[16]||(t[16]=W(a=>O(),["prevent"]))},[e("div",ge,[v.value?(n(),i(V,{key:1},[s(c,{modelValue:l(o).code,"onUpdate:modelValue":t[2]||(t[2]=a=>l(o).code=a),label:"Código",name:"code",required:""},null,8,["modelValue"]),s(c,{modelValue:l(o).name,"onUpdate:modelValue":t[3]||(t[3]=a=>l(o).name=a),label:"Nombre",name:"name"},null,8,["modelValue"]),s(S,{modelValue:l(o).specie_id,"onUpdate:modelValue":t[4]||(t[4]=a=>l(o).specie_id=a),label:"Especie",name:"specie_id"},{default:h(()=>[Ze,(n(!0),i(V,null,$(d.species,a=>(n(),i("option",{value:a.id},u(a.name),9,et))),256))]),_:1},8,["modelValue"]),s(S,{modelValue:l(o).details.gender,"onUpdate:modelValue":t[5]||(t[5]=a=>l(o).details.gender=a),label:"Genero",name:"gender"},{default:h(()=>[tt,at]),_:1},8,["modelValue"]),s(c,{modelValue:l(o).details.race,"onUpdate:modelValue":t[6]||(t[6]=a=>l(o).details.race=a),label:"Raza",name:"race"},null,8,["modelValue"]),s(c,{modelValue:l(o).details.initial_weight,"onUpdate:modelValue":t[7]||(t[7]=a=>l(o).details.initial_weight=a),label:"Peso Inicial",name:"initial_weight",type:"number"},null,8,["modelValue"]),s(c,{modelValue:l(o).details.initial_height,"onUpdate:modelValue":t[8]||(t[8]=a=>l(o).details.initial_height=a),label:"Altura Inicial",name:"initial_height",type:"number"},null,8,["modelValue"]),s(c,{modelValue:l(o).details.birth_date,"onUpdate:modelValue":t[9]||(t[9]=a=>l(o).details.birth_date=a),label:"Fecha de nacimiento",name:"birth_date",type:"date"},null,8,["modelValue"]),s(c,{modelValue:l(o).details.adoption_date,"onUpdate:modelValue":t[10]||(t[10]=a=>l(o).details.adoption_date=a),label:"Fecha de adopción",name:"adoption_date",type:"date"},null,8,["modelValue"]),s(c,{modelValue:l(o).details.entry_date,"onUpdate:modelValue":t[11]||(t[11]=a=>l(o).details.entry_date=a),label:"Fecha de ingreso",name:"entry_date",type:"date"},null,8,["modelValue"]),s(c,{modelValue:l(o).details.exit_date,"onUpdate:modelValue":t[12]||(t[12]=a=>l(o).details.exit_date=a),label:"Fecha de salida",name:"exit_date",type:"date"},null,8,["modelValue"]),s(c,{modelValue:l(o).details.death_date,"onUpdate:modelValue":t[13]||(t[13]=a=>l(o).details.death_date=a),label:"Fecha de muerte",name:"death_date",type:"date"},null,8,["modelValue"]),s(c,{modelValue:l(o).details.cause_of_death,"onUpdate:modelValue":t[14]||(t[14]=a=>l(o).details.cause_of_death=a),label:"Causa de muerte",name:"cause_of_death"},null,8,["modelValue"]),e("div",lt,[s(I,{text:"Cancelar",onClick:t[15]||(t[15]=a=>v.value=!1)}),s(w,{loading:l(o).processing,text:"Guardar",type:"submit"},null,8,["loading"])])],64)):(n(),i(V,{key:0},[e("div",null,[xe,e("p",Ve,u(d.animal.code),1)]),e("div",null,[ke,e("p",Ce,u(d.animal.name),1)]),e("div",null,[we,e("p",Ue,u(((E=d.animal.specie)==null?void 0:E.name)??"Ninguna"),1)]),e("div",null,[Ee,e("p",Fe,u(d.details.gender),1)]),e("div",null,[$e,e("p",Se,u(d.details.race),1)]),e("div",null,[Ie,e("p",Me,u(d.details.initial_weight),1)]),e("div",null,[Ne,e("p",je,u(d.details.initial_height),1)]),d.details.birth_date?(n(),i("div",qe,[Ae,e("p",De,u(l(x)(d.details.birth_date)),1)])):m("",!0),d.details.adoption_date?(n(),i("div",Pe,[Be,e("p",Re,u(l(x)(d.details.adoption_date)),1)])):m("",!0),d.details.entry_date?(n(),i("div",ze,[Ge,e("p",Oe,u(l(x)(d.details.entry_date)),1)])):m("",!0),d.details.exit_date?(n(),i("div",He,[Le,e("p",Te,u(l(x)(d.details.exit_date)),1)])):m("",!0),d.details.death_date?(n(),i("div",Je,[Ke,e("p",Qe,u(l(x)(d.details.death_date)),1)])):m("",!0),d.details.cause_of_death?(n(),i("div",We,[Xe,e("p",Ye,u(d.details.cause_of_death),1)])):m("",!0)],64))])],32),v.value?m("",!0):(n(),i("button",{key:0,type:"button",class:"text-primary mt-4",onClick:t[17]||(t[17]=a=>v.value=!0)}," Editar "))])])]),e("div",ot,[e("div",st,[dt,e("div",nt,[p.value?(n(),i("div",it,[e("img",{src:p.value,alt:"",class:"mb-2 w-auto max-h-[35rem] rounded-md object-contain"},null,8,ut)])):(n(),i("div",rt,[e("input",{type:"file",accept:"image/*",class:"absolute inset-0 z-50 m-0 h-full w-full cursor-pointer p-0 opacity-0 outline-none",onChange:z},null,32),e("div",ct,[e("span",mt,[s(l(de),{size:"20",stroke:"2",class:"text-slate-400"})]),_t])])),l(o).photo!=null&&typeof l(o).photo=="object"?(n(),i("div",bt,[s(I,{text:"Cancelar",onClick:P}),s(w,{loading:k.value,text:"Guardar",type:"button",onClick:H},null,8,["loading"])])):p.value?(n(),i("div",ht,[e("button",{type:"button",class:"text-primary font-medium",onClick:G}," Eliminar ")])):m("",!0)])])])])):m("",!0),y.value=="eventos"?(n(),i("div",pt,[s(oe,null,{header:h(()=>[ft,vt,yt,gt]),body:h(()=>[d.events.data.length==0?(n(),i("tr",xt,kt)):m("",!0),(n(!0),i(V,null,$(d.events.data,a=>(n(),i("tr",{key:a.id},[e("td",null,u(l(Z)(a.created_at)),1),e("td",null,u(a.name),1),e("td",null,u(a.quantity),1),e("td",null,[e("div",Ct,[s(M,{icon:l(te),onClick:K=>L(a),tooltip:"Editar"},null,8,["icon","onClick"]),s(M,{icon:l(se),onClick:K=>l(D)(a.id),tooltip:"Eliminar"},null,8,["icon","onClick"])])])]))),128))]),footer:h(()=>[s(le,{links:d.events.links},null,8,["links"])]),_:1}),s(Y,{modelValue:f.value,"onUpdate:modelValue":t[20]||(t[20]=a=>f.value=a),onOnSubmit:t[21]||(t[21]=a=>T()),onOnCancel:J,title:"Evento",loading:l(b).processing},{default:h(()=>[s(c,{modelValue:l(b).name,"onUpdate:modelValue":t[18]||(t[18]=a=>l(b).name=a),label:"Nombre",required:"",name:"name"},null,8,["modelValue"]),s(c,{modelValue:l(b).quantity,"onUpdate:modelValue":t[19]||(t[19]=a=>l(b).quantity=a),label:"Cantidad",name:"quantity",type:"number",required:""},null,8,["modelValue"])]),_:1},8,["modelValue","loading"])])):m("",!0)])]}),_:1}))}};export{Ot as default};
