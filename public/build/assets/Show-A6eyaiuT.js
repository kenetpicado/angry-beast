import{_ as R}from"./PrimaryButton-D9xsJ82q.js";import{_ as p}from"./InputForm-ZivRodwo.js";import{_ as N}from"./ModalForm-BzeIvtvi.js";import{_ as B,a as D,b as S,I as G}from"./TableSection-DnIYx_0D.js";import{w as L,_ as A}from"./DefaultLayout-CWSOlPCh.js";import{I as F,a as M}from"./IconArrowBigUp-B0Tn6Qbg.js";import{I as P}from"./IconEdit-DVNOvkGw.js";import{I as j}from"./IconUserDollar-CaUEK6X6.js";import{a as z}from"./date-a-P_LG0S.js";import{u as H}from"./useTransaction-Cc0fMA76.js";import{_ as W}from"./Tabs-DMhhq8-5.js";import{t as J}from"./types-Bq2MFrNM.js";import{_ as $}from"./SelectForm-BA2bjkri.js";import{_ as K}from"./Card-B8kWNnhj.js";import{k as E,m as Q,f as X,o as d,c as k,w as u,O as Y,b as o,t as i,a as l,h as _,l as V,F as b,j as Z,u as a,n as ee}from"./app-DhAk2B9F.js";import"./SecondaryButton-B4hYLcYP.js";import"./createVueComponent-YZjrh2G-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./confirmation-LqhIgFI2.js";import"./toast-aXzCVqLX.js";const te={class:"mb-4 flex gap-3 items-center justify-between"},oe={class:"text-2xl font-semibold"},ae={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mb-3"},le=o("option",{value:"",selected:""},"Todos",-1),ne=o("option",{value:"INGRESO"},"Ingreso",-1),se=o("option",{value:"EGRESO"},"Egresos",-1),re={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-3"},ie=o("th",null,"Fecha",-1),de=o("th",null,"Tipo",-1),ue=o("th",null,"Descripcion",-1),ce=o("th",null,"Cantidad",-1),me=o("th",null,"Monto",-1),pe=o("th",null,"Total",-1),_e=o("th",null,"Acciones",-1),fe={key:0},ge=o("td",{class:"text-center text-slate-400",colspan:"7"},"No hay datos que mostrar",-1),ve=[ge],ye={class:"font-bold"},Ve={class:"flex gap-4"},be=o("option",{value:"",selected:""},"Seleccione un tipo",-1),he=["value"],Se={class:"col-span-2 font-bold text-lg"},Pe={__name:"Show",props:["concept","transactions","transactions_total"],setup(f){const y=f,c=E(!1),h=E("transacciones"),g=new URLSearchParams(window.location.search),s=Q({type:g.get("type")??"",from:g.get("from")??"",to:g.get("to")??"",search:g.get("search")??""}),{destroy:C,form:n,onSubmit:I,setValues:U}=H({model_id:y.concept.id,model_type:"App\\Models\\Concept"});function w(r){U(r),c.value=!0}function q(){c.value=!1,n.reset()}const x=[{label:"Transacciones",value:"transacciones",icon:j}];L(s,()=>{let r={...s};for(const t in r)r[t]||delete r[t];Y.get(route("dashboard.concepts.show",y.concept.id),r,{preserveState:!0,preserveScroll:!0,only:["transactions","transactions_total"],replace:!1})},{debounce:500,maxWait:1e3});const v=(r,t,e)=>{const m=y.transactions_total.find(T=>T.type==r);return m?m[t].toLocaleString():e},O=X(()=>[{title:"Ingresos: "+v("INGRESO","count",0),value:"C$ "+v("INGRESO","total",0),icon:F},{title:"Egresos: "+v("EGRESO","count",0),value:"C$ "+v("EGRESO","total",0),icon:M}]);return(r,t)=>(d(),k(A,{head:"Usuarios"},{default:u(()=>[o("div",te,[o("h2",oe,i(f.concept.name),1),l(R,{text:"Nuevo",onClick:t[0]||(t[0]=e=>c.value=!0)})]),l(W,{options:x,modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=e=>h.value=e)},null,8,["modelValue"]),o("div",ae,[l(p,{modelValue:s.from,"onUpdate:modelValue":t[2]||(t[2]=e=>s.from=e),label:"Desde",type:"date"},null,8,["modelValue"]),l(p,{modelValue:s.to,"onUpdate:modelValue":t[3]||(t[3]=e=>s.to=e),label:"Hasta",type:"date"},null,8,["modelValue"]),l($,{modelValue:s.type,"onUpdate:modelValue":t[4]||(t[4]=e=>s.type=e),label:"Tipo",name:"type",required:""},{default:u(()=>[le,ne,se]),_:1},8,["modelValue"]),l(p,{modelValue:s.search,"onUpdate:modelValue":t[5]||(t[5]=e=>s.search=e),label:"Buscar",type:"search",placeholder:"Buscar descripción"},null,8,["modelValue"])]),o("div",re,[(d(!0),_(b,null,V(O.value,(e,m)=>(d(),k(K,{key:m,item:e},null,8,["item"]))),128))]),l(D,null,{header:u(()=>[ie,de,ue,ce,me,pe,_e]),body:u(()=>[f.transactions.data.length==0?(d(),_("tr",fe,ve)):Z("",!0),(d(!0),_(b,null,V(f.transactions.data,e=>(d(),_("tr",{key:e.id},[o("td",null,i(a(z)(e.created_at)),1),o("td",null,[o("span",{class:ee([e.type==="INGRESO"?"badge-primary":"badge-red"])},i(e.type),3)]),o("td",null,i(e.description),1),o("td",null,i(e.quantity),1),o("td",null,"C$"+i(e.value),1),o("td",ye,"C$"+i(e.total.toLocaleString()),1),o("td",null,[o("div",Ve,[l(S,{icon:a(P),onClick:m=>w(e),tooltip:"Editar"},null,8,["icon","onClick"]),l(S,{icon:a(G),onClick:m=>a(C)(e.id),tooltip:"Eliminar"},null,8,["icon","onClick"])])])]))),128))]),footer:u(()=>[l(B,{links:f.transactions.links},null,8,["links"])]),_:1}),l(N,{modelValue:c.value,"onUpdate:modelValue":t[10]||(t[10]=e=>c.value=e),onOnSubmit:t[11]||(t[11]=e=>a(I)(()=>c.value=!1)),onOnCancel:q,title:"Transacción",loading:a(n).processing},{default:u(()=>[l($,{modelValue:a(n).type,"onUpdate:modelValue":t[6]||(t[6]=e=>a(n).type=e),label:"Tipo",name:"type",required:""},{default:u(()=>[be,(d(!0),_(b,null,V(a(J),e=>(d(),_("option",{key:e,value:e},i(e),9,he))),128))]),_:1},8,["modelValue"]),l(p,{modelValue:a(n).description,"onUpdate:modelValue":t[7]||(t[7]=e=>a(n).description=e),label:"Descripcion",required:"",name:"description"},null,8,["modelValue"]),l(p,{modelValue:a(n).quantity,"onUpdate:modelValue":t[8]||(t[8]=e=>a(n).quantity=e),label:"Cantidad",name:"quantity",type:"number",required:""},null,8,["modelValue"]),l(p,{modelValue:a(n).value,"onUpdate:modelValue":t[9]||(t[9]=e=>a(n).value=e),label:"Monto",name:"value",type:"number",required:""},null,8,["modelValue"]),o("div",Se," Total C$"+i((a(n).quantity*a(n).value).toLocaleString()),1)]),_:1},8,["modelValue","loading"])]),_:1}))}};export{Pe as default};
