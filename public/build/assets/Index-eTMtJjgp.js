import{_ as V,a as I,b as k,I as x}from"./TableSection-DnIYx_0D.js";import{w as $,_ as w}from"./DefaultLayout-CWSOlPCh.js";import{I as C,a as R}from"./IconArrowBigUp-B0Tn6Qbg.js";import{a as O}from"./date-a-P_LG0S.js";import{u as B}from"./useTransaction-Cc0fMA76.js";import{_ as p}from"./InputForm-ZivRodwo.js";import{_ as G}from"./SelectForm-BA2bjkri.js";import{m as N,f as T,o as r,c as f,w as c,O as U,b as t,a as l,h as _,l as g,F as y,j as D,t as n,u as h,n as q}from"./app-DhAk2B9F.js";import{_ as F}from"./Card-B8kWNnhj.js";import"./createVueComponent-YZjrh2G-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./confirmation-LqhIgFI2.js";import"./toast-aXzCVqLX.js";const L=t("div",{class:"mb-6 flex gap-3 items-center justify-between"},[t("h2",{class:"text-2xl font-semibold"},"Transacciones")],-1),A={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mb-3"},P=t("option",{value:"",selected:""},"Todos",-1),j=t("option",{value:"INGRESO"},"Ingreso",-1),z=t("option",{value:"EGRESO"},"Egresos",-1),H={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-3"},M=t("th",null,"Fecha",-1),W=t("th",null,"Tipo",-1),J=t("th",null,"Concepto",-1),K=t("th",null,"Descripción",-1),Q=t("th",null,"Cantidad",-1),X=t("th",null,"Monto",-1),Y=t("th",null,"Total",-1),Z=t("th",null,"Acciones",-1),tt={key:0},et=t("td",{class:"text-center text-slate-400",colspan:"7"},"No hay datos que mostrar",-1),ot=[et],st={class:"font-bold"},at={class:"flex gap-4"},yt={__name:"Index",props:["transactions","transactions_total"],setup(d){const b=d,{destroy:E}=B({}),u=new URLSearchParams(window.location.search),s=N({type:u.get("type")??"",from:u.get("from")??"",to:u.get("to")??"",search:u.get("search")??""});$(s,()=>{let a={...s};for(const o in a)a[o]||delete a[o];U.get(route("dashboard.transactions.index"),a,{preserveState:!0,preserveScroll:!0,only:["transactions","transactions_total"],replace:!1})},{debounce:500,maxWait:1e3});const m=(a,o,e)=>{const i=b.transactions_total.find(S=>S.type==a);return i?i[o].toLocaleString():e},v=T(()=>[{title:"Ingresos: "+m("INGRESO","count",0),value:"C$ "+m("INGRESO","total",0),icon:C},{title:"Egresos: "+m("EGRESO","count",0),value:"C$ "+m("EGRESO","total",0),icon:R}]);return(a,o)=>(r(),f(w,{head:"Usuarios"},{default:c(()=>[L,t("div",A,[l(p,{modelValue:s.from,"onUpdate:modelValue":o[0]||(o[0]=e=>s.from=e),label:"Desde",type:"date"},null,8,["modelValue"]),l(p,{modelValue:s.to,"onUpdate:modelValue":o[1]||(o[1]=e=>s.to=e),label:"Hasta",type:"date"},null,8,["modelValue"]),l(G,{modelValue:s.type,"onUpdate:modelValue":o[2]||(o[2]=e=>s.type=e),label:"Tipo",name:"type",required:""},{default:c(()=>[P,j,z]),_:1},8,["modelValue"]),l(p,{modelValue:s.search,"onUpdate:modelValue":o[3]||(o[3]=e=>s.search=e),label:"Buscar",type:"search",placeholder:"Buscar descripción"},null,8,["modelValue"])]),t("div",H,[(r(!0),_(y,null,g(v.value,(e,i)=>(r(),f(F,{key:i,item:e},null,8,["item"]))),128))]),l(I,null,{header:c(()=>[M,W,J,K,Q,X,Y,Z]),body:c(()=>[d.transactions.data.length==0?(r(),_("tr",tt,ot)):D("",!0),(r(!0),_(y,null,g(d.transactions.data,e=>(r(),_("tr",{key:e.id},[t("td",null,n(h(O)(e.created_at)),1),t("td",null,[t("span",{class:q([e.type=="INGRESO"?"badge-primary":"badge-red"])},n(e.type),3)]),t("td",null,n(e.model.name),1),t("td",null,n(e.description),1),t("td",null,n(e.quantity),1),t("td",null,"C$"+n(e.value),1),t("td",st,"C$"+n(e.total.toLocaleString()),1),t("td",null,[t("div",at,[l(k,{icon:h(x),onClick:i=>h(E)(e.id),tooltip:"Eliminar"},null,8,["icon","onClick"])])])]))),128))]),footer:c(()=>[l(V,{links:d.transactions.links},null,8,["links"])]),_:1})]),_:1}))}};export{yt as default};
